---
layout: default
title: My Media Library
---

<style>
.media-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 15px;
}
.media-card {
  width: 180px;
  border: 1px solid #ccc;
  background: #fff;
  padding: 10px;
  cursor: pointer;
  text-align: center;
}
.media-card img {
  width: 100%;
  height: auto;
}
.modal {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.7);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}
.modal.hidden { display: none; }
.modal-content {
  background: #fff;
  padding: 20px;
  width: 90%;
  max-width: 700px;
  max-height: 90vh;
  overflow: auto;
  position: relative;
}
.modal-content textarea {
  width: 100%;
  height: 60px;
}
.modal-content select {
  width: 100%;
  margin-top: 10px;
}
#close-modal {
  position: absolute;
  top: 5px; right: 10px;
  font-size: 20px;
  cursor: pointer;
}
</style>

# 🎬 My Simple Media Library

<div class="media-grid" id="media-grid"></div>

<div id="media-modal" class="modal hidden">
  <div class="modal-content">
    <span id="close-modal">❌</span>
    <h2 id="modal-title"></h2>
    <div id="media-player" style="margin-bottom: 10px;"></div>
    <textarea id="note-input" placeholder="Write a quick note..."></textarea>
    <select id="rating-input">
      <option value="">☆ Rate this</option>
      <option value="1">★☆☆☆☆</option>
      <option value="2">★★☆☆☆</option>
      <option value="3">★★★☆☆</option>
      <option value="4">★★★★☆</option>
      <option value="5">★★★★★</option>
    </select>
    <button id="save-btn" style="margin-top:10px;">💾 Save</button>
  </div>
</div>

<script src="https://unpkg.com/epubjs/dist/epub.min.js"></script>
<script>
const mediaItems = [
  {
    id: "yt1",
    title: "Lo-fi Chill Beats",
    type: "video",
    source: "youtube",
    url: "https://www.youtube.com/embed/jfKfPfyJRdk",
    cover: "https://placehold.co/200x300?text=Lo-Fi"
  },
  {
    id: "ebook1",
    title: "Sample EPUB Book",
    type: "ebook",
    source: "local",
    url: "https://s3.amazonaws.com/moby-dick/OPS/package.opf",  // example EPUB
    cover: "https://placehold.co/200x300?text=Book"
  },
  {
    id: "mp3-1",
    title: "Chill MP3 Track",
    type: "music",
    source: "local",
    url: "https://file-examples.com/storage/fe3fc12ac16dfc8bce70be1/2017/11/file_example_MP3_1MG.mp3",
    cover: "https://placehold.co/200x300?text=MP3"
  }
];

const grid = document.getElementById("media-grid");
const modal = document.getElementById("media-modal");
const modalTitle = document.getElementById("modal-title");
const mediaPlayer = document.getElementById("media-player");
const noteInput = document.getElementById("note-input");
const ratingInput = document.getElementById("rating-input");
const closeModal = document.getElementById("close-modal");
const saveBtn = document.getElementById("save-btn");

mediaItems.forEach(item => {
  const card = document.createElement("div");
  card.className = "media-card";
  card.innerHTML = `
    <img src="${item.cover}" alt="${item.title}" />
    <strong>${item.title}</strong><br/>
    <small>${item.type}</small>
  `;
  card.onclick = () => openModal(item);
  grid.appendChild(card);
});

function openModal(item) {
  modal.classList.remove("hidden");
  modalTitle.textContent = item.title;
  mediaPlayer.innerHTML = "";

  // Load saved notes and rating
  noteInput.value = localStorage.getItem(item.id + "_note") || "";
  ratingInput.value = localStorage.getItem(item.id + "_rating") || "";

  if (item.type === "video" || item.source === "youtube") {
    mediaPlayer.innerHTML = `<iframe width="100%" height="315" src="${item.url}" frameborder="0" allowfullscreen></iframe>`;
  } else if (item.type === "music") {
    mediaPlayer.innerHTML = `<audio controls src="${item.url}" style="width:100%;"></audio>`;
  } else if (item.type === "ebook") {
    const container = document.createElement("div");
    container.id = "epub-viewer";
    container.style.height = "400px";
    mediaPlayer.appendChild(container);
    const book = ePub(item.url);
    book.renderTo("epub-viewer", { width: "100%", height: "100%" });
  }

  saveBtn.onclick = () => {
    localStorage.setItem(item.id + "_note", noteInput.value);
    localStorage.setItem(item.id + "_rating", ratingInput.value);
    alert("Saved!");
  };
}

closeModal.onclick = () => {
  modal.classList.add("hidden");
  mediaPlayer.innerHTML = "";
};
</script>
